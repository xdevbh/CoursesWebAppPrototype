@page "/registration"
@inject NavigationManager NavigationManager

<PageTitle>Registration</PageTitle>

<MudStack>
    @if (part == 1)
    {
        <MudCard>
            <MudCardContent>
                <MudTextField Label="UserName" Required="true" RequiredError="UserName is required"
                              @bind-Value="_user.UserName" For="@(() => _user.UserName)" Variant="Variant.Outlined"/>
                <MudTextField Label="Email" Class="mt-3" Required="true" RequiredError="Email is required"
                              @bind-Value="_user.Email" For="@(() => _user.Email)" Variant="Variant.Outlined"/>
                <MudTextField Label="Password" Class="mt-3" Required="true" RequiredError="Password is required"
                              @bind-Value="_user.Password" For="@(() => _user.Password)" InputType="InputType.Password" Variant="Variant.Outlined"/>
                <MudCheckBox @bind-Value="agree" Color="Color.Primary">I agree with rules!</MudCheckBox>
            </MudCardContent>
            <MudCardActions>
                <MudButton Variant="Variant.Text" Color="Color.Primary" >Log In</MudButton>
                <MudSpacer/>
                <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="OpenSecond">Register</MudButton>
            </MudCardActions>
        </MudCard>
    }
    else if (part == 2)
    {
        <MudCard>
            <MudCardContent>
                <MudTextField Label="Name" Required="true" RequiredError="Name is required" Variant="Variant.Outlined"
                              @bind-Value="_user.Name" For="@(() => _user.Name)"/>
                <MudTextField Label="Surname" Class="mt-3" Required="true" RequiredError="Surname is required" Variant="Variant.Outlined"
                              @bind-Value="_user.Surname" For="@(() => _user.Surname)"/>
                <MudTextField Label="Phone number" Class="mt-3" Required="true" RequiredError="Phone number is required" Variant="Variant.Outlined"
                              @bind-Value="_user.PhoneNumber" For="@(() => _user.PhoneNumber)" InputType="InputType.Password"/>
                <MudTextField Label="House №" Class="mt-3" Required="true" RequiredError="House № is required" Variant="Variant.Outlined"
                              @bind-Value="_address.HouseN" For="@(() => _address.HouseN)"/>
                <MudTextField Label="Street" Class="mt-3" Required="true" RequiredError="Street is required" Variant="Variant.Outlined"
                              @bind-Value="_address.Street" For="@(() => _address.Street)"/>
                <MudTextField Label="City" Class="mt-3" Required="true" RequiredError="City is required" Variant="Variant.Outlined"
                              @bind-Value="_address.City" For="@(() => _address.City)"/>
                <MudTextField Label="ZipCode" Class="mt-3" Required="true" RequiredError="ZipCode is required" Variant="Variant.Outlined"
                              @bind-Value="_address.ZipCode" For="@(() => _address.ZipCode)"/>
                <MudTextField Label="Country" Class="mt-3" Required="true" RequiredError="Country is required" Variant="Variant.Outlined"
                              @bind-Value="_address.Country" For="@(() => _address.Country)"/>
            </MudCardContent>
            <MudCardActions>
                <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="OpenSecond">Back</MudButton>
                <MudSpacer/>
                <MudButton Variant="Variant.Filled" Color="Color.Primary">Next</MudButton>
            </MudCardActions>
        </MudCard>
    }

</MudStack>

@code {
    bool agree = false;
    private User _user = new User();
    private Address _address = new Address();
    
    int part = 1;
    void OpenSecond()
    {
        if (agree)
        {
            part = 2;
        }
    }
    
    void OpenFirst()
    {
        part = 1;
    }
}